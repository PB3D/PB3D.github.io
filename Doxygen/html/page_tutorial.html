<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PB3D: Tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PB3D
   &#160;<span id="projectnumber">[2.36]</span>
   </div>
   <div id="projectbrief">Ideal linear high-n MHD stability in 3-D</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#tutorial_eq">Getting the Equilibrium</a></li>
<li class="level1"><a href="#tutorial_inputs">Setting Up the Input File</a></li>
<li class="level1"><a href="#tutorial_PB3D">Running PB3D</a></li>
<li class="level1"><a href="#tutorial_scripts">Run Script Tools</a></li>
<li class="level1"><a href="#tutorial_POST">Post-processing With POST</a></li>
</ul>
</div>
<div class="textblock"><p>This page contains a hands-on tutorial to get you used to running PB3D to calculate 3-D ideal linear high-n MHD stability, and POST to post-process the results.</p>
<p>Be sure to check out the <a class="el" href="page_installation.html">Installation</a> instruction first.</p>
<p> 
If at any point a routine is not clear, don't hesitate to consult the <a href="namespacemembers.html">Procedures and Variables</a> page.
 <h1><a class="anchor" id="tutorial_eq"></a>
Getting the Equilibrium</h1>
<p>PB3D calculates stability of an equilibrium magnetic toroidal configuration. It is written in a modular way to isolate this main task from the actual code that was used to obtain the equilibrium configuration, and the format that this code may use. Currently, two formats are possible:</p><ul>
<li>3-D VMEC <a class="el" href="citelist.html#CITEREF_hirshman1983vmec">[8]</a>.</li>
<li>Axisymmetric HELENA <a class="el" href="citelist.html#CITEREF_mikhailovskii1997optimization">[11]</a>.</li>
</ul>
<p>VMEC is a general 3-D code built on an interesting idea: The poloidal coordinate \(\theta\) is deformed in such as a way to make the Fourier basis that is used to describe the cylindrical coordinates \(R(s,\theta,\varphi)\) and \(Z(s,\theta,\varphi)\) as narrow as possible, where \(s\) is the flux label ( \(s=\sqrt{\Psi_\text{tor}/\Psi_{\text{tor,edge}}})\) and \(\varphi\) is the regular cylindrical angle (<a class="el" href="page_tutorial.html#fnt1">1</a>). This is done by introducing a deformation factor \(\lambda(s,\theta,\varphi)\) defined so that the straight-field line coordinate \(\theta_\text{F}\) is given by \(\theta_\text{F} = \theta + \lambda \).</p>
<p>The fact that \(R\), \(Z\) and \(\lambda\) are given as a double Fourier series in \(\theta\) and \(\zeta\) ensures that the angular derivatives can be done analytically. This property is used in PB3D. Apart from that, the flux functions that describe the profiles on the flux surfaces, the rotational transform \(\iota(s)\) and pressure \(p(s)\), are also returned.</p>
<p>For HELENA, the situation is different, as this code considers axisymmetric equilibria only. Its output consists, aside from flux functions safety factor \(q(\psi)\), presure \(p(\psi)\) and toroidal covariant magnetic field \(F(\psi)\), where \(\psi=\Psi_\text{pol}/\Psi_{\text{pol,edge}}\) is the normalized poloidal angle, of a 2-D table for the upper metric factors \(h^{\psi\psi}\) and \(h^{\psi\theta}\) and the lower metric factor \(g_{\zeta\zeta}\). HELENA uses the same angular coordinates \(\theta\) and \(\zeta = -\varphi\) as PB3D (see <a class="el" href="page_tutorial.html#fnt1">1</a>).</p>
<dl class="section note"><dt>Note</dt><dd>The modular nature of PB3D enables easy integration of other equilibrium codes, if necessary.</dd></dl>
<p>To get the appropriate equilibrium code results into PB3D, it suffices to place the output files in the same directory in which PB3D is run:</p><ul>
<li>for HELENA, it is a text file, corresponding to the mapping file (<code>fort.12</code>),</li>
<li>for VMEC, it is the so-called <code>wout</code> file,</li>
</ul>
<p>and to specify their names as the second input argument, the first one being the file with user inputs (see <a class="el" href="page_tutorial.html#tutorial_inputs">Setting Up the Input File</a>).</p>
<dl class="section note"><dt>Note</dt><dd>For VMEC, the <code>wout</code> file has to be in Netcdf's <code>.nc</code> format. The old <code>.txt</code> format is no longer supported.</dd></dl>
<p>In any case, if you forget how to run the PB3D (or POST) programs, you can always just type </p><div class="fragment"><div class="line">./PB3D --help </div></div><!-- fragment --><p> or even just </p><div class="fragment"><div class="line">./PB3D </div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>The HELENA version used here outputs the variables <code>IAS</code> and <code>B0</code> to the mapping file, after the variable <code>JS0</code> and after the variable <code>RAXIS</code>. Some versions do not write these by default. If yours is one of the above, the solution is to change <div class="fragment"><div class="line">write(nmap,8) JS0 </div></div><!-- fragment --> to <div class="fragment"><div class="line">write(nmap,8) JS0, IAS </div></div><!-- fragment --> and <div class="fragment"><div class="line">write(nmap,8) RAXIS </div></div><!-- fragment --> to <div class="fragment"><div class="line">write(nmap,8) RAXIS, B0 </div></div><!-- fragment --> in the subroutine <code>mapping</code> and recompile and re-run HELENA.</dd></dl>
<h1><a class="anchor" id="tutorial_inputs"></a>
Setting Up the Input File</h1>
<p>Now that we have the equilibrium files, it is time to have a look at the input file.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&amp;inputdata_PB3D</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    min_n_par_X             = 500</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    min_par_X               = 0.0</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    max_par_X               = 2.0</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    alpha                   = 0.0</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    min_r_sol               = 0.1</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    max_r_sol               = 1.0</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    n_r_sol                 = 500</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    prim_X                  = 10</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    n_mod_X                 = 20</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    BC_style                = 1 1</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    U_style                 = 3</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    max_tot_mem             = 8000</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    max_it_rich             = 2</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    use_normalization       = .true.</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;/</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;//! [some extra options for PB3D]</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    rich_restart_lvl        = 1</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    tol_rich                = 1.0E-4</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    tol_SLEPC               = 1.0E-8 1.0E-8</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;//! [some extra options for PB3D]</div></div><!-- fragment --><p>Have a look:</p><ul>
<li><code>min_n_par_X</code> is the number of points in the parallel grid.</li>
<li>They range from <code>min_par_X</code> to <code>max_par_X</code>. As this is an axisymmetric example, they can simply be chosen to be a fundamental period of \( 2\pi \). For 3-D equilibria, this number has to be increased until convergence is reached <a class="el" href="citelist.html#CITEREF_Weyens2017PB3D">[16]</a>.</li>
<li><code>alpha</code> indicates the field line at which the perturbations are situated.</li>
<li><code>n_r_sol</code> is the number of points in the solution grid, that ranges from <code>min_r_sol</code> to <code>max_r_sol</code> in the PB3D normal coordinate (see <a class="el" href="namespacenum__vars.html#ae21ec57b791e369c3558c0eb3da1555b" title="whether poloidal flux is used in F coords. ">num_vars.use_pol_flux_f</a>).</li>
<li><code>n_mod_X</code> is the number of resonating Harmonics with <code>prim_X</code> the primary mode number.</li>
<li><code>BC_style(1:2)</code> indicates the style with which the boundary conditions are implemented deep in the plasma and on the plasma edge.</li>
<li><code>max_tot_mem</code> is the total virtual memory that PB3D may consume.</li>
<li><code>use_normalization</code> indicates whether normalization is used (recommended), but it is useful to turn this off for debugging.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd><code>BC_style(2)</code> is currently set to 1, indicating that the mode amplitude is zero at the edge. In the upcoming version of PB3D, the vacuum perturbation on the potential energy will be taken into account, which enables other boundary condition styles at the plasma edge.</dd></dl>
<p>There are also some extra options listed (but not loaded in PB3D as they com after the end of the <code>inputdata_PB3D</code> block of the Fortran namelist) below: </p><div class="fragment"><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    rich_restart_lvl        = 1</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    tol_rich                = 1.0E-4</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    tol_SLEPC               = 1.0E-8 1.0E-8</div></div><!-- fragment --><p>They include:</p><ul>
<li><code>rich_restart_lvl</code> is used to restart a simulation at a certain Richardson level. The Richardson level 1 refers to the first simulation, with the number of parallel points used in the calculation of line integrals along the magnetic field set by <code>min_n_par_X</code> (see <a class="el" href="page_inputs.html#inputs_PB3D_file_tab">inputs_PB3D_file_tab</a>). For every subsequent Richardson level, this number is approximately doubled in order to gain a grid size that is twice as fine. The results from these different levels are extrapolated to a theoretically infinitely fine grid. These operations are done in module <a class="el" href="namespacerich__ops.html" title="Operations concerning Richardson extrapolation. ">rich_ops</a>.</li>
<li><code>tol_rich</code> is the tolerance at which Richardson extrapolation is considered to have converged.</li>
<li><code>tol_SLEPC</code> is an array of tolerances used for the different SLEPc eigenvalue solutions.</li>
</ul>
<p>There are many, many more input parameters. A short description of these can be found in <a class="el" href="page_inputs.html">Input variables</a>.</p>
<h1><a class="anchor" id="tutorial_PB3D"></a>
Running PB3D</h1>
<p>This tutorial provides a basic VMEC equilibrium file to experiment with, called <code>cbm18</code>, which represents a simple circular test case designed to be ballooning unstable. <a class="el" href="citelist.html#CITEREF_ferraro2010ELMbenchmark">[5]</a> Some properties are given in table <a class="el" href="page_tutorial.html#tutorial_PB3D_tab">1</a>. </p><a class="anchor" id="tutorial_PB3D_tab"></a>
<table class="doxtable">
<caption>Table 1. equilibrium parameters</caption>
<tr>
<td>toroidal current \(I_\text{tot}\)  </td><td>\(1.614MA\)   </td></tr>
<tr>
<td>\(\beta_\text{pol}\)  </td><td>\(0.443 \)   </td></tr>
<tr>
<td>aspect ratio \(\epsilon\)  </td><td>\(1.5 \)   </td></tr>
</table>
<p>Put this equilibrium file, as well as the input file in a separate run directory; let's call it <code>cbm18</code>.</p>
<p>In order to produce outputs, PB3D needs three sub-directories in the run directory, called <code>Data/</code>, <code>Scripts/</code> and <code>Plots/</code>.</p><ul>
<li>In <code>Data/</code>, datafiles are stored that are used for plots.</li>
<li>In <code>Scripts/</code>, scripts are generated that use the datafiles from <code>Data</code>.</li>
<li>The <code>Plots/</code>, the resulting plots are located, both for external plots, and for HDF5 plots that can be read later in visualization software such as VisIt or ParaView. In <a class="el" href="page_outputs.html#output_plots">Output Plots</a>, this is explained in more detail.</li>
</ul>
<p>If these directories are not present, you will receive error message, so go ahead and create them.</p>
<p>We can now run the code using <code>mpirun</code>. For example, with </p><div class="fragment"><div class="line">mpirun -np 4 ./PB3D PB3D.input wout.nc </div></div><!-- fragment --><p> 4 processes are used. You can find the VMEC file <a href="wout.nc">here</a>.</p>
<p>There are optional run-time options that can be triggered, such as <code>&ndash;jump_to_sol</code>, which can be used to easily change solution preferences, such as discretization order, etc. For an overview, see <a class="el" href="page_inputs.html#inputs_POST_cmd">Command-line inputs</a>; they are not treated here.</p>
<p>You will see formatted output on the screen, with indentation that consistent indentation according to the depth of a routine in the program. The same output is also written to an output file, unformatted but still indented (see <a class="el" href="page_outputs.html#output_file_log">Log file</a>).</p>
<p>The resulting eigenvalues can also be read in a separate output file (see <a class="el" href="page_outputs.html#output_file_EV">Eigenvalue summary file</a>).</p>
<p>Take a look at these output files and shuffle a bit with the input parameters if you want. For example, change <code>n_mod_X</code> to another value in order to get a different number Fourier harmonics, or <code>n_r_sol</code> to change the number of normal grid points in the solution. The solution should not change a lot if you have enough harmonics and normal grid poins.</p>
<dl class="section note"><dt>Note</dt><dd>For VMEC, the magnetic axis is a bit problematic. It is necessary, therefore, to choose <code>min_r_sol</code> to be slightly larger than 0; 0.01 for example.</dd></dl>
<h1><a class="anchor" id="tutorial_scripts"></a>
Run Script Tools</h1>
<p>PB3D comes with a bunch of extra run tools, which can greatly improve user experience.</p>
<dl class="section note"><dt>Note</dt><dd>These tools now come in a separate git repository, <code></code> <a href="https://github.com/ToonWeyens/PB3D_tools">PB3D_tools</a>.</dd></dl>
<p>In table <a class="el" href="page_tutorial.html#tutorial_scripts_tab">2</a>, an overview is given: </p><a class="anchor" id="tutorial_scripts_tab"></a>
<table class="doxtable">
<caption>Table 2. extra tools</caption>
<tr>
<td><code>run</code>  </td><td>Run script that can be used for PB3D and POST with an extensive range of features including<ul>
<li>the possibility to do a parameter scan for a variety of input variables</li>
<li>automatic support for schedulers such as PBS and SLURM</li>
<li>support for running on local folders when on a HPC cluster</li>
<li>etc...   </li>
</ul>
</td></tr>
<tr>
<td><code>extract_jobs_info</code>  </td><td>Extracts the eigenvalues from the results of a parameter scan produced by <code>run</code> with input variable modifications.   </td></tr>
<tr>
<td><code>inspect_SLURM_jobs</code>  </td><td>Finds the directories of all the jobs currently running in SLURM and in every directory, it gives the tail of <code>PB3D.out</code>. The user can decide to cancel the job.   </td></tr>
</table>
<h1><a class="anchor" id="tutorial_POST"></a>
Post-processing With POST</h1>
<p>POST provides a way to visualize the results from PB3D. Many options are possible, and they can be activated using <code>plot_</code> flags (see <a class="el" href="page_inputs.html#inputs_POST_file">Input file</a>).</p>
<p>An example is given in <code>POST.input</code> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&amp;INPUTDATA_POST</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    plot_resonance          = .true.</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    plot_magn_grid          = .true.</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    plot_flux_q             = .true.</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    plot_sol_xi             = .true.</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    plot_sol_Q              = .true.</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    plot_E_rec              = .true.</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    plot_B                  = .true.</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    plot_J                  = .true.</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    plot_kappa              = .true.</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    min_r_plot              = 0.0</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    max_r_plot              = 1.0</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    n_theta_plot            = 101</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    min_theta_plot          = 0.00</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    max_theta_plot          = 2.00</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    n_zeta_plot             = 1</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    min_zeta_plot           = 0.00</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    max_zeta_plot           = 0.00</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    POST_style              = 1</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    plot_grid_style         = 0</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    pert_mult_factor_POST   = 0.0000</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    max_tot_mem             = 8000</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;/</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;//! [some extra options for POST]</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    ex_plot_style           = 2</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    PB3D_rich_lvl           = 1</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;//! [some extra options for POST]</div></div><!-- fragment --><p> It can be seen that apart from the <code>plot_</code> flags, there are also</p><ul>
<li><code>min_r_plot</code> and <code>max_r_plot</code>, which are the direct equivalent of <code>min_r_sol</code> and <code>max_r_sol</code> in PB3D.</li>
<li><code>min_theta_plot</code>, <code>max_theta_plot</code> and <code>n_theta_plot</code> which indicate the range of the poloidal variable that is plot, as well as the the number of point. There is an equivalent for the toroidal variable.</li>
<li><code>POST_style</code> that allows the user to change between different styles, such as whether the output grid is chosen to be fill the torus in a regular way, for example, or whether it follows the PB3D equilibrium grid.</li>
<li><code>plot_grid_style</code>, subsequently, can be used to change the way in which these grids are produced. For example, they could be changed to slab plots or plots with a straightened toroidal angle.</li>
<li><code>pert_mult_factor_POST</code> can be used to deform the output grids by the perturbation itself.</li>
</ul>
<p>Also here, there are also some extra options listed below: </p><div class="fragment"><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    ex_plot_style           = 2</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    PB3D_rich_lvl           = 1</div></div><!-- fragment --><p>They include:</p><ul>
<li><code>ex_plot_style</code> to indicate which program is to be used for external plotting. Changing it to 2 would engage Bokeh and Mayavi.</li>
<li><code>PB3D_rich_lvl</code> can be optionally employed to specify explicitely which Richardson level to use for the post-processing.</li>
</ul>
<p>All of these options are explained in <a class="el" href="page_inputs.html#inputs_POST_file">Input file</a>. Again, there are also run-time options that can be found in <a class="el" href="page_inputs.html#inputs_POST_cmd">Command-line inputs</a>.</p>
<p>Now, run the POST program, for example using 4 MPI processes: </p><div class="fragment"><div class="line">mpirun -np 4 ./POST POST.input PB3D_out.h5 </div></div><!-- fragment --><p>An interesting output is the energy reconstruction, which is activated with <code>plot_E_rec</code>. This calculation reinserts the solution normal mode into the perturbed plasma potential terms, in order to check whether the Rayleigh quotient still holds, and to see which terms are dominant and which ones are less important. The results are stored in a separate files as well (see <a class="el" href="page_outputs.html#output_file_E_rec">Energy reconstruction file</a>).</p>
<p>If <code>&ndash;do_execute_command_line</code> was not explicitely used, the actual external plot programs are not used yet, but their usage is given in a shell commands script file (see <a class="el" href="page_outputs.html#output_file_shell">Shell commands file</a>). Run this shell with </p><div class="fragment"><div class="line">./POST_shell_commands.sh </div></div><!-- fragment --><p>If everything is okay, you should now see output in the <code>Plots/</code> folder. If an error occurs, please verfiy whether you have appropriate versions of the external plot programs (i.e. GnuPlot, Bokeh, ...)</p>
<p>Also, open some of the <code>.xmf</code> files in VisIt or ParaView to explore these plots.</p>
<p>To finish this tutorial, feel free to adjust some input parameters. For example, you can change the output grid to become 3-D by setting <code>n_zeta_plot</code> and <code>max_zeta_plot</code>, or you could deform it using <code>pert_mult_factor_POST</code>.</p>
<dl class="section note"><dt>Note</dt><dd><ol type="1">
<li><a class="anchor" id="fnt1"></a>The cylindrical angle \(\varphi\) is often the inverse of the one used in nuclear fusion research, as it can lead to left-handed coordinate systems. In VMEC, it is opted to use it anyway, so it has a left-handed coordinate system. The poloidal angle is chosen to be anticlockwise if you look at a cross-section of the plasma that lies to the right of the \(Z\)-axis with the \(Z\)-axis pointing up, as in PB3D. In PB3D, however, the toroidal angle \(\zeta = - \varphi\) is chosen as the inverse of the cylindrical angle, so it is right-handed. </li>
</ol>
</dd></dl>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<address class="footer"><small>
<center>this documentation was created with <a href="http://www.doxygen.org/index.html">Doxygen 1.8.13</a> by <a href="mailto:weyenst@gmail.com">Toon Weyens</a></center>
</small></address>
</body>
</html>

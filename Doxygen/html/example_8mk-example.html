<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PB3D: example.mk</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PB3D
   &#160;<span id="projectnumber">[2.27]</span>
   </div>
   <div id="projectbrief">Ideal linear high-n MHD stability in 3-D</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">example.mk</div>  </div>
</div><!--header-->
<div class="contents">
<p>An example makefile:</p>
<div class="fragment"><div class="line">##############################################################################</div><div class="line">#</div><div class="line">#   Example makefile for the program PB3D (Peeling Ballooning in 3D)</div><div class="line">#   \author Author: Toon Weyens</div><div class="line">#</div><div class="line">#   Don&#39;t forget to set the directories:</div><div class="line">#       - LIBSTELL_DIR</div><div class="line">#       - HDF5_DIR</div><div class="line">#       - NETCDFF_DIR (note: Fortran library)</div><div class="line">#       - PETSC_DIR</div><div class="line">#       - SLEPC_DIR</div><div class="line">#       - STRUMPACK_DIR</div><div class="line">##############################################################################</div><div class="line"></div><div class="line">##############################################################################</div><div class="line">#   Include</div><div class="line">##############################################################################</div><div class="line">## [PETSc and SLEPc trick]</div><div class="line">include  $(PETSC_DIR)/lib/petsc/conf/variables</div><div class="line">include  $(SLEPC_DIR)/lib/slepc/conf/slepc_variables</div><div class="line">## [PETSc and SLEPc trick]</div><div class="line"></div><div class="line">## [PETSc and SLEPc trick inc]</div><div class="line">INCLUDE = $(PETSC_FC_INCLUDES) $(SLEPC_INCLUDE)</div><div class="line">## [PETSc and SLEPc trick inc]</div><div class="line">## [Libstell special]</div><div class="line">INCLUDE += -I$(LIBSTELL_DIR)/libstell_dir</div><div class="line">## [Libstell special]</div><div class="line">INCLUDE += -I$(STRUMPACK_DIR)/include</div><div class="line">## [PB3D include]</div><div class="line">INCLUDE += -I$(PB3D_DIR)/include</div><div class="line">## [PB3D include]</div><div class="line">INCLUDE += -I/usr/include/hdf5/openmpi</div><div class="line"></div><div class="line">##############################################################################</div><div class="line">#   Link</div><div class="line">##############################################################################</div><div class="line">## [PB3D libraries]</div><div class="line">LIB_INTERNAL = libdfftpack.a libfoul.a libbspline.a</div><div class="line">## [PB3D libraries]</div><div class="line"></div><div class="line">LINK := $(LIB_INTERNAL)</div><div class="line"></div><div class="line">## [PETSc and SLEPc trick lib]</div><div class="line">LINK += $(PETSC_LIB)</div><div class="line">LINK += $(SLEPC_LIB)</div><div class="line">## [PETSc and SLEPc trick lib]</div><div class="line">LINK += $(LIBSTELL_DIR)/libstell.a</div><div class="line">LINK += -L$(STRUMPACK_DIR)/lib -lstrumpack</div><div class="line">LINK += -L$(HDF5_DIR) -lhdf5_fortran -lhdf5</div><div class="line">LINK += -L$(NETCDFF_DIR)/lib -lnetcdff</div><div class="line">LINK += -Wl,-R$(NETCDFF_DIR)/lib</div><div class="line">LINK += -lscalapack -lblacs -lblas -lm</div><div class="line">LINK += -lstdc++ -lmpi_cxx</div><div class="line"></div><div class="line"></div><div class="line">##############################################################################</div><div class="line">#   Compiler</div><div class="line">##############################################################################</div><div class="line">COMPILER=mpifort</div><div class="line"></div><div class="line"></div><div class="line">##############################################################################</div><div class="line">#   Linker</div><div class="line">##############################################################################</div><div class="line">LINKER=mpifort</div><div class="line"></div><div class="line"></div><div class="line">##############################################################################</div><div class="line">#   Compiler flags</div><div class="line">#   options (used with -D[name]):</div><div class="line">#       ldebug: debug</div><div class="line">#       lIB: infiniband</div><div class="line">#       lwith_gnu: use GNU compiler [default]</div><div class="line">#       lwith_intel: use INTEL compiler, (checked for version 12.0.2)</div><div class="line">#   note: INTEL warning 6536 is suppressed, which informs about extra &quot;USE&quot;.</div><div class="line">#   note: INTEL warning 6843 is suppressed, which informs about empty</div><div class="line">#       intent(out) variables</div><div class="line">##############################################################################</div><div class="line">COMP_FLAGS = -finit-real=snan -g -Og -Wall -Wextra -pedantic \</div><div class="line">    -fimplicit-none -fbacktrace -fno-omit-frame-pointer \</div><div class="line">    -fcheck=all -cpp -Dldebug# debug, profiling with gprof2dot, GCC</div><div class="line">#COMP_FLAGS = -O3 -fbacktrace -g -fimplicit-none -fno-omit-frame-pointer \</div><div class="line">    #-cpp# optimized, GCC</div><div class="line"></div><div class="line">#COMP_FLAGS = -O0 -DlIB -Dldebug -g -heap-arrays 100 -recursive \</div><div class="line">    #-ftrapuv -check bounds -check uninit -traceback -implicitnone \</div><div class="line">    #-fno-omit-frame-pointer -cpp -Dlwith_intel -diag-disable 6536 \</div><div class="line">    #-diag-disable 6843# debug, profiling with gprof2dot, INTEL</div><div class="line">#COMP_FLAGS = -O3 -DlIB -traceback -g -heap-arrays 100 -recursive \</div><div class="line">    #-implicitnone -fno-omit-frame-pointer -cpp -Dlwith_intel \</div><div class="line">    #-diag-disable 6536 -diag-disable 6843# optimized, INTEL</div><div class="line"></div><div class="line">COMP_FLAGS_EX= -O2 -w</div><div class="line"></div><div class="line">COMP_FLAGS_F= -O2 -funroll-loops -fexpensive-optimizations</div><div class="line"></div><div class="line"></div><div class="line">##############################################################################</div><div class="line">#   Link flags</div><div class="line">##############################################################################</div><div class="line">LINK_FLAGS = -fPIC -finit-real=snan# debug</div><div class="line">#LINK_FLAGS = -fPIC# optimized</div><div class="line"></div><div class="line"></div><div class="line">##############################################################################</div><div class="line">#   Prepare</div><div class="line">##############################################################################</div><div class="line"># Add &quot;Modules&quot; and &quot;Libraries&quot; to the search path for the prerequisites</div><div class="line">VPATH = Modules:Libraries</div><div class="line"></div><div class="line"># Contains list of source files (.o) and dependencies</div><div class="line">DEPLIST = PB3D.dep</div><div class="line">OBJLIST = ObjectList# defines &quot;ObjectFiles&quot;</div><div class="line"></div><div class="line"># Includes source files and dependency list</div><div class="line">include $(DEPLIST)# Dependencies of all the objects</div><div class="line">include $(OBJLIST)# Names of all the objects</div><div class="line"></div><div class="line"></div><div class="line">##############################################################################</div><div class="line">#   Rules</div><div class="line">##############################################################################</div><div class="line">all:    PB3D POST</div><div class="line"></div><div class="line">PB3D:   $(ObjectFiles) $(LIB_INTERNAL) PB3D.o</div><div class="line">    $(LINKER) -o $@ $(ObjectFiles) PB3D.o $(LINK) $(LINK_FLAGS)</div><div class="line"></div><div class="line">POST:   $(ObjectFiles) $(LIB_INTERNAL) POST.o</div><div class="line">    $(LINKER) -o $@ $(ObjectFiles) POST.o $(LINK) $(LINK_FLAGS)</div><div class="line"></div><div class="line">libdfftpack.a:  dfft.o</div><div class="line">    ar -rcs libdfftpack.a dfft.o</div><div class="line"></div><div class="line">libfoul.a:  foul.o</div><div class="line">    ar -rcs libfoul.a foul.o</div><div class="line"></div><div class="line">libbspline.a:   bspline_sub_module.o</div><div class="line">    ar -rcs libbspline.a bspline_sub_module.o</div><div class="line"></div><div class="line">%.o: %.f90</div><div class="line">    $(COMPILER) $(INCLUDE) $(COMP_FLAGS) -c $&lt;</div><div class="line"></div><div class="line">%.o: %.f</div><div class="line">    $(COMPILER) $(COMP_FLAGS_F) -c $&lt;</div><div class="line"></div><div class="line">dfft.o: dfft.f</div><div class="line">    $(COMPILER) $(COMP_FLAGS_EX) -c $&lt;</div><div class="line"></div><div class="line">foul.o: foul.f90</div><div class="line">    $(COMPILER) $(COMP_FLAGS_EX) -c $&lt;</div><div class="line"></div><div class="line">bspline_sub_module.o: bspline_sub_module.f90</div><div class="line">    $(COMPILER) $(COMP_FLAGS_EX) -c $&lt;</div><div class="line"></div><div class="line">clean:</div><div class="line">    @rm -f *.o *.a *.mod *~ fort.* </div><div class="line"></div><div class="line">clean_all:</div><div class="line">    @rm -f *.o *.mod *~ fort.* PB3D POST</div></div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<address class="footer"><small>
<center>this documentation was created with <a href="http://www.doxygen.org/index.html">Doxygen 1.8.13</a> by <a href="mailto:weyenst@gmail.com">Toon Weyens</a></center>
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PB3D: mpi_vars::lock_type Type Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PB3D
   &#160;<span id="projectnumber">[2.37]</span>
   </div>
   <div id="projectbrief">Ideal linear high-n MHD stability in 3-D</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacempi__vars.html">mpi_vars</a></li><li class="navelem"><a class="el" href="structmpi__vars_1_1lock__type.html">lock_type</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structmpi__vars_1_1lock__type-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mpi_vars::lock_type Type Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>lock type  
 <a href="structmpi__vars_1_1lock__type.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abb38fce763fc0925e6bb7d69162e68b0"><td class="memItemLeft" align="right" valign="top">procedure&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmpi__vars_1_1lock__type.html#abb38fce763fc0925e6bb7d69162e68b0">init</a> =&gt; <a class="el" href="namespacempi__vars.html#ab38aeec20e567cf6f272587890ead066">init_lock</a></td></tr>
<tr class="memdesc:abb38fce763fc0925e6bb7d69162e68b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize  <a href="#abb38fce763fc0925e6bb7d69162e68b0">More...</a><br /></td></tr>
<tr class="separator:abb38fce763fc0925e6bb7d69162e68b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b633d333ce2963fbe05e99badd00606"><td class="memItemLeft" align="right" valign="top">procedure&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmpi__vars_1_1lock__type.html#a3b633d333ce2963fbe05e99badd00606">dealloc</a> =&gt; <a class="el" href="namespacempi__vars.html#af03c942b5f1c980adf9e1b2ba3f4bd58">dealloc_lock</a></td></tr>
<tr class="memdesc:a3b633d333ce2963fbe05e99badd00606"><td class="mdescLeft">&#160;</td><td class="mdescRight">deallocate  <a href="#a3b633d333ce2963fbe05e99badd00606">More...</a><br /></td></tr>
<tr class="separator:a3b633d333ce2963fbe05e99badd00606"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a1bc45d5db890c080c843318662050565"><td class="memItemLeft" align="right" valign="top">integer, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmpi__vars_1_1lock__type.html#a1bc45d5db890c080c843318662050565">wl</a></td></tr>
<tr class="memdesc:a1bc45d5db890c080c843318662050565"><td class="mdescLeft">&#160;</td><td class="mdescRight">waiting list  <a href="#a1bc45d5db890c080c843318662050565">More...</a><br /></td></tr>
<tr class="separator:a1bc45d5db890c080c843318662050565"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19ac8404814735597e92c647e31745ad"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmpi__vars_1_1lock__type.html#a19ac8404814735597e92c647e31745ad">wl_win</a></td></tr>
<tr class="memdesc:a19ac8404814735597e92c647e31745ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">window to waiting list  <a href="#a19ac8404814735597e92c647e31745ad">More...</a><br /></td></tr>
<tr class="separator:a19ac8404814735597e92c647e31745ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae13a02ff3985d06c3455b2ae29210cc4"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmpi__vars_1_1lock__type.html#ae13a02ff3985d06c3455b2ae29210cc4">wu_tag</a></td></tr>
<tr class="memdesc:ae13a02ff3985d06c3455b2ae29210cc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">wakeup tag  <a href="#ae13a02ff3985d06c3455b2ae29210cc4">More...</a><br /></td></tr>
<tr class="separator:ae13a02ff3985d06c3455b2ae29210cc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53ce091d52f98ca430a9e97f8bf0c0f4"><td class="memItemLeft" align="right" valign="top">logical&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmpi__vars_1_1lock__type.html#a53ce091d52f98ca430a9e97f8bf0c0f4">blocking</a></td></tr>
<tr class="memdesc:a53ce091d52f98ca430a9e97f8bf0c0f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">is a normal blocking process  <a href="#a53ce091d52f98ca430a9e97f8bf0c0f4">More...</a><br /></td></tr>
<tr class="separator:a53ce091d52f98ca430a9e97f8bf0c0f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>lock type </p>
<p>There is a blocking (BL) and a nonblocking (NB) version where the former requires an exclusive lock and the latter a shared one. This is saved in the variable <code>blocking</code>.</p>
<p>NB processes that get the lock directly on request (meaning that there were no other processes in the queue) notify directly all the next NB processes after gaining access. It also sets their status to active. When a NB process gains the lock when notified after waiting, it does not have to check for other NB processes, as this has been done by the notifying process.</p>
<p>A BL process retains exclusive access upon receipt of the lock. Similarly to NB processes, if the receipt was direct on request, the status is set to active, but only of this NB process.</p>
<p>When returning the lock, all BL processes and NB that find themselves to be the last active NB process, scan the waiting list and pass the lock preferably to another BL process to notify. If not available, it searches for all the NB processes to notify together.</p>
<p>The advantage of prefering BL processes after finishing a process is that this way NB processes are accumulated, and then quickly finished afterwards.</p>
<dl class="section note"><dt>Note</dt><dd>Every process in the waiting queue will eventually receive a notification.</dd></dl>
<p>Scheme: </p><table class="doxtable">
<tr>
<th></th><th>request access </th><th>gain acces </th><th>return access </th></tr>
<tr>
<th>BL </th><td><ul>
<li>
add to queue </li>
<li>
wait </li>
</ul>
</td><td>if direct: <ul>
<li>
activate </li>
</ul>
</td><td><ul>
<li>
remove from queue </li>
<li>
find next BL/NB </li>
<li>
notify </li>
<li>
activate all </li>
</ul>
</td></tr>
<tr>
<th>NB </th><td><ul>
<li>
add to queue </li>
<li>
wait </li>
</ul>
</td><td>if direct: <ul>
<li>
find next NB </li>
</ul>
for all next NB: <ul>
<li>
notify </li>
<li>
activate </li>
</ul>
</td><td>always: <ul>
<li>
remove from queue </li>
</ul>
if last NB: <ul>
<li>
find next BL/NB </li>
<li>
notify </li>
<li>
activate all </li>
</ul>
</td></tr>
</table>
<p>with preference BL &gt; NB(s).</p>
<dl class="section see"><dt>See also</dt><dd>This is based on an extension of the ideas in <code>RossAtomicIO</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="MPI__vars_8f90_source.html#l00063">63</a> of file <a class="el" href="MPI__vars_8f90_source.html">MPI_vars.f90</a>.</p>
</div><h2 class="groupheader">Member Function/Subroutine Documentation</h2>
<a id="a3b633d333ce2963fbe05e99badd00606"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b633d333ce2963fbe05e99badd00606">&#9670;&nbsp;</a></span>dealloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">procedure mpi_vars::lock_type::dealloc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>deallocate </p>
<p>deallocate </p>

<p class="definition">Definition at line <a class="el" href="MPI__vars_8f90_source.html#l00072">72</a> of file <a class="el" href="MPI__vars_8f90_source.html">MPI_vars.f90</a>.</p>

</div>
</div>
<a id="abb38fce763fc0925e6bb7d69162e68b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb38fce763fc0925e6bb7d69162e68b0">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">procedure mpi_vars::lock_type::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initialize </p>
<p>initialize </p>

<p class="definition">Definition at line <a class="el" href="MPI__vars_8f90_source.html#l00070">70</a> of file <a class="el" href="MPI__vars_8f90_source.html">MPI_vars.f90</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a53ce091d52f98ca430a9e97f8bf0c0f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53ce091d52f98ca430a9e97f8bf0c0f4">&#9670;&nbsp;</a></span>blocking</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">logical mpi_vars::lock_type::blocking</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>is a normal blocking process </p>

<p class="definition">Definition at line <a class="el" href="MPI__vars_8f90_source.html#l00067">67</a> of file <a class="el" href="MPI__vars_8f90_source.html">MPI_vars.f90</a>.</p>

</div>
</div>
<a id="a1bc45d5db890c080c843318662050565"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bc45d5db890c080c843318662050565">&#9670;&nbsp;</a></span>wl</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">integer, dimension(:), allocatable mpi_vars::lock_type::wl</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>waiting list </p>

<p class="definition">Definition at line <a class="el" href="MPI__vars_8f90_source.html#l00064">64</a> of file <a class="el" href="MPI__vars_8f90_source.html">MPI_vars.f90</a>.</p>

</div>
</div>
<a id="a19ac8404814735597e92c647e31745ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19ac8404814735597e92c647e31745ad">&#9670;&nbsp;</a></span>wl_win</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">integer mpi_vars::lock_type::wl_win</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>window to waiting list </p>

<p class="definition">Definition at line <a class="el" href="MPI__vars_8f90_source.html#l00065">65</a> of file <a class="el" href="MPI__vars_8f90_source.html">MPI_vars.f90</a>.</p>

</div>
</div>
<a id="ae13a02ff3985d06c3455b2ae29210cc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae13a02ff3985d06c3455b2ae29210cc4">&#9670;&nbsp;</a></span>wu_tag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">integer mpi_vars::lock_type::wu_tag</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>wakeup tag </p>

<p class="definition">Definition at line <a class="el" href="MPI__vars_8f90_source.html#l00066">66</a> of file <a class="el" href="MPI__vars_8f90_source.html">MPI_vars.f90</a>.</p>

</div>
</div>
<hr/>The documentation for this type was generated from the following file:<ul>
<li>/opt/PB3D/Modules/<a class="el" href="MPI__vars_8f90_source.html">MPI_vars.f90</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<address class="footer"><small>
<center>this documentation was created with <a href="http://www.doxygen.org/index.html">Doxygen 1.8.13</a> by <a href="mailto:weyenst@gmail.com">Toon Weyens</a></center>
</small></address>
</body>
</html>

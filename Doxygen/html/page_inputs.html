<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PB3D: Input variables</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PB3D
   &#160;<span id="projectnumber">[2.45]</span>
   </div>
   <div id="projectbrief">Ideal linear high-n MHD stability in 3-D</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Input variables </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#inputs_PB3D">PB3D Inputs</a><ul><li class="level2"><a href="#inputs_PB3D_file">Input file</a></li>
<li class="level2"><a href="#inputs_PB3D_cmd">Command-line inputs</a></li>
</ul>
</li>
<li class="level1"><a href="#inputs_POST">POST Inputs</a><ul><li class="level2"><a href="#inputs_POST_file">Input file</a></li>
<li class="level2"><a href="#inputs_POST_cmd">Command-line inputs</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p></p>
<p>This page describes the various input variables that PB3D and POST can take.</p>
<p>Inputs are generally done through the input file, but there are some inputs that are provided on runtime, using the command-line with <code>&ndash;[option_name]</code> format. </p><dl class="section see"><dt>See also</dt><dd>See <a class="el" href="namespacefiles__ops.html#a1e219b1147f109f758d03bef89d540e8" title="Initialize the variables for the module.">init_files()</a>.</dd></dl>
<p>For both PB3D and POST, both types are discussed.</p>
<p>Some general remarks:</p><ul>
<li>There is some fault detection built into the routines. These distinguish between minor faults, that trigger a warning but do not stop execution, and major faults, that trigger an error that stop execution. <dl class="section see"><dt>See also</dt><dd>See <a class="el" href="namespacemessages.html#aa4a8d01563e92558e8a0875b075ec54c" title="Write output to file identified by output_i.">writo()</a>.</dd></dl>
</li>
<li>The data type <code>real</code> refers to double precision real, defined by <a class="el" href="namespacenum__vars.html#a03802aa2bd86439d7a9370836fabf3f2" title="double precision">num_vars.dp</a>. For integers, standard precision is used.</li>
<li>There are hard-coded <code>min_tol</code> and <code>max_tol</code> in <a class="el" href="namespaceinput__ops.html#a434acca4f59f9dc1d91e04f846133684" title="Reads input options from user-provided input file.">read_input_opts()</a>, which are used to limit the tolerances <code>tol_rich</code>, <code>tol_zero</code> and <code>tol_SLEPC</code>. This could be changed if needed.</li>
<li>If <code>eq_style = 2</code> (i.e. HELENA), the total maximum memory available must be enough to perform the first Richardson level in a single equilibrium job (see <a class="el" href="page_overview.html">General code structure</a>).</li>
</ul>
<h1><a class="anchor" id="inputs_PB3D"></a>
PB3D Inputs</h1>
<h2><a class="anchor" id="inputs_PB3D_file"></a>
Input file</h2>
<a class="anchor" id="inputs_PB3D_file_tab"></a>
<table class="doxtable">
<caption>Table 1. PB3D input file</caption>
<tr>
<th>input parameter </th><th>explanation </th><th>default value </th><th>data type </th><th>note  </th></tr>
<tr>
<td colspan="5" bgcolor="LightGray" align="center"><b>concerning solution</b>   </td></tr>
<tr>
<td><code>n_r_sol</code> </td><td>number of points in solution grid </td><td>\( 100\)  </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>min_r_sol</code> </td><td>minimum normalized flux of computational domain \(\left(0\ldots 1\right)\) </td><td>\(0.1\) </td><td><code>real</code> </td><td>(<a class="el" href="page_inputs.html#fni1">1</a>)   </td></tr>
<tr>
<td><code>max_r_sol</code> </td><td>maximum normalized flux of computational domain \(\left(0\ldots 1\right)\) </td><td>\(1.0\) </td><td><code>real</code> </td><td>(<a class="el" href="page_inputs.html#fni1">1</a>)   </td></tr>
<tr>
<td><code>tol_norm</code> </td><td>tolerance for normal range </td><td>\(0.05\) </td><td><code>real</code> </td><td>(<a class="el" href="page_inputs.html#fni2">2</a>)   </td></tr>
<tr>
<td><code>EV_style</code> </td><td>style for EV calculation: <table class="doxtable">
<tr>
<td>\(1\)</td><td>SLEPC solver </td></tr>
</table>
<br  />
 </td><td>\(1\) </td><td><code>int</code> </td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td colspan="5" bgcolor="LightGray" align="center"><b>concerning field line</b>   </td></tr>
<tr>
<td><code>alpha_style</code> </td><td>style for alpha: <table class="doxtable">
<tr>
<td>\(1\)</td><td>one field line, many turns </td></tr>
<tr>
<td>\(2\)</td><td>many field lines, one turn </td></tr>
</table>
<br  />
 </td><td>\(2\) (VMEC), \(1\) (HELENA) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>n_alpha</code> </td><td>number of field lines for <code>alpha_style</code> \(2\) </td><td>\(10\) (VMEC) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>alpha</code> </td><td>field line label \(\left[\pi\right]\) for <code>alpha_style</code> \(1\) </td><td>\(0\) </td><td><code>real</code> </td><td></td></tr>
<tr>
<td><code>min_alpha</code> </td><td>minimum field line label \(\alpha\) \(\left[\pi\right]\) for <code>alpha_style</code> \(2\) </td><td>\(0\) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>max_alpha</code> </td><td>maximum field line label \(\alpha\) \(\left[\pi\right]\) for <code>alpha_style</code> \(2\) </td><td>\(2\) </td><td><code>int</code> </td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td colspan="5" bgcolor="LightGray" align="center"><b>concerning perturbation</b>   </td></tr>
<tr>
<td><code>min_n_par_X</code> </td><td>minimum number of parallel points for integration </td><td>\(20\) </td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni3">3</a>)  </td></tr>
<tr>
<td><code>min_par_X</code> </td><td>minimum parallel angle \(\left[\pi\right]\) for integration </td><td>\(-4\) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>max_par_X</code> </td><td>maximum parallel angle \(\left[\pi\right]\) for integration </td><td>\(4\) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>prim_X</code> </td><td>primary mode number in geodesic direction </td><td>\(20\) </td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni4">4</a>)  </td></tr>
<tr>
<td><code>min_sec_X</code> </td><td>minimum secondary mode number in parallel direction </td><td></td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni4">4</a>, <a class="el" href="page_inputs.html#fni5">5</a>)  </td></tr>
<tr>
<td><code>max_sec_X</code> </td><td>maximum secondary mode number in parallel direction </td><td></td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni4">4</a>, <a class="el" href="page_inputs.html#fni5">5</a>)  </td></tr>
<tr>
<td><code>n_mod_X</code> </td><td>number of secondary modes in parallel direction </td><td>\(20\) </td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni4">4</a>, <a class="el" href="page_inputs.html#fni5">5</a>)  </td></tr>
<tr>
<td><code>use_pol_flux_F</code> </td><td>on which flux to base the normal coordinate. <table class="doxtable">
<tr>
<td><code> .true.</code> </td><td>rescaled poloidal flux \(\frac{\Psi_\text{pol}}{2 \pi}\)  </td></tr>
<tr>
<td><code> .false.</code> </td><td>rescaled toroidal flux \(\frac{\Psi_\text{tor}}{2 \pi}\)  </td></tr>
</table>
<br  />
 </td><td><code>.true.</code> </td><td><code>log</code> </td><td><p class="starttd">(<a class="el" href="page_inputs.html#fni35">35</a>) </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td colspan="5" bgcolor="LightGray" align="center"><b>concerning normalization</b>   </td></tr>
<tr>
<td><code>rho_0</code> </td><td>Normalization factor for density \(\rho\) \(\frac{kg}{m^3}\) </td><td>\(10^{-7}\) </td><td><code>real</code>  </td><td></td></tr>
<tr>
<td><code>R_0</code> </td><td>Normalization factor for length scale \(R\) \(m\) </td><td></td><td><code>real</code>  </td><td>(<a class="el" href="page_inputs.html#fni6">6</a>)  </td></tr>
<tr>
<td><code>pres_0</code> </td><td>Normalization factor for pressure \(p\) \(Pa\) </td><td></td><td><code>real</code>  </td><td>(<a class="el" href="page_inputs.html#fni6">6</a>)  </td></tr>
<tr>
<td><code>psi_0</code> </td><td>Normalization factor for flux \(\Psi\) \(T m^2\) </td><td></td><td><code>real</code>  </td><td>(<a class="el" href="page_inputs.html#fni6">6</a>)  </td></tr>
<tr>
<td><code>B_0</code> </td><td>Normalization factor for magnetic field \(\vec{B}\) \(T\) </td><td></td><td><code>real</code>  </td><td>(<a class="el" href="page_inputs.html#fni6">6</a>)  </td></tr>
<tr>
<td><code>T_0</code> </td><td>Normalization factor for time \(s\) </td><td></td><td><code>real</code>  </td><td><p class="starttd">(<a class="el" href="page_inputs.html#fni6">6</a>) </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td colspan="5" bgcolor="LightGray" align="center"><b>concerning input and output</b>   </td></tr>
<tr>
<td><code>n_sol_requested</code> </td><td>number of solutions requested </td><td>\(1\) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>retain_all_sol</code> </td><td>retain all solutions <table class="doxtable">
<tr>
<td><code> .true.</code> </td><td>unphysical eigenvalues are also retained  </td></tr>
<tr>
<td><code> .false.</code> </td><td>unphysical eigenvalues are left out  </td></tr>
</table>
<br  />
 </td><td>\(2\) </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni7">7</a>)  </td></tr>
<tr>
<td><code>plot_resonance</code> </td><td>plot the safety factor (poloidal flux) or rotational transform (toroidal flux) and the resonant values </td><td><code>.false.</code> </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni13">13</a>)  </td></tr>
<tr>
<td><code>plot_magn_grid</code> </td><td>plot magnetic field lines in the flux surfaces in 3-D geometry as an animation </td><td><code>.false.</code> </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni14">14</a>)  </td></tr>
<tr>
<td><code>plot_B</code> </td><td>plot magnetic field \(\vec{B} = \nabla \alpha \times \nabla \psi \) \(\left[T\right]\) </td><td><code>.false.</code> </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni15">15</a>)  </td></tr>
<tr>
<td><code>plot_J</code> </td><td>plot current \(\vec{J} = \mu_0^{-1} \nabla \times \left(\nabla \alpha \times \nabla \psi\right) \) \(\left[\frac{A}{m^2}\right]\) </td><td><code>.false.</code> </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni16">16</a>)  </td></tr>
<tr>
<td><code>plot_kappa</code> </td><td>plot curvature \(\vec{\kappa} = \frac{\vec{B}}{B} \cdot \nabla \frac{\vec{B}}{B}\) \(\left[\frac{1}{m}\right]\) and its components \( \kappa_n = \frac{\nabla \psi}{\left|\nabla \psi\right|^2} \cdot \vec{\kappa} \) \(\left[\frac{1}{T m^2}\right]\) and \( \kappa_g = \frac{\nabla \psi \times \vec{B}}{B^2} \cdot \vec{\kappa} \) \(\left[\phantom{\cdot}\right]\) </td><td><code>.false.</code> </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni17">17</a>)  </td></tr>
<tr>
<td><code>plot_flux_q</code> </td><td>plot flux quantities \(q\), \(\iota\), \(p\) \(\left[Pa\right]\), \(\Psi_\text{pol}\) \(\left[T m^2\right]\) and \(\Psi_\text{tor}\) \(\left[T m^2\right]\) </td><td><code>.false.</code> </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni18">18</a>)  </td></tr>
<tr>
<td><code>n_theta_plot</code> </td><td>number of points in plots in \(\theta\) direction </td><td></td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni19">19</a>)  </td></tr>
<tr>
<td><code>n_zeta_plot</code> </td><td>number of points in plots in \(\zeta\) direction </td><td></td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni19">19</a>)  </td></tr>
<tr>
<td><code>min_theta_plot</code> </td><td>minimum of \(\theta\) range for plots </td><td>\(1\)</td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>max_theta_plot</code> </td><td>minimum of \(\theta\) range for plots </td><td>\(3\)</td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>min_zeta_plot</code> </td><td>minimum of \(\zeta\) range for plots </td><td></td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni20">20</a>)  </td></tr>
<tr>
<td><code>max_zeta_plot</code> </td><td>minimum of \(\zeta\) range for plots </td><td></td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni20">20</a>)  </td></tr>
<tr>
<td><code>plot_size</code> </td><td>size of 2-D plots in inch by inch </td><td>\(\left[10,5\right]\) </td><td><code>int(2)</code>  </td><td></td></tr>
<tr>
<td><code>ex_plot_style</code> </td><td>style how external plots are made <table class="doxtable">
<tr>
<td>\(1\) </td><td>GnuPlot  </td></tr>
<tr>
<td>\(2\) </td><td>Bokeh for 2-D and Mayavi for 3-D  </td></tr>
</table>
<br  />
 </td><td>\(1\) </td><td><code>int</code>  </td><td><p class="starttd">(<a class="el" href="page_inputs.html#fni21">21</a>) </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td colspan="5" bgcolor="LightGray" align="center"><b>concerning Richardson extrapolation</b>   </td></tr>
<tr>
<td><code>max_it_rich</code> </td><td>maximum number of Richardson extrapolations </td><td>\(1\) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>tol_rich</code> </td><td>tolerance for convergence of Richardson extrapolations </td><td>\(1^{-4}\) </td><td><code>real</code> </td><td></td></tr>
<tr>
<td><code>rich_restart_lvl</code> </td><td>Richardson level at which to restart a previous simulation </td><td>\(1\) </td><td><code>int</code> </td><td><p class="starttd">(<a class="el" href="page_inputs.html#fni8">8</a>) </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td colspan="5" bgcolor="LightGray" align="center"><b>concerning finding zeros</b>   </td></tr>
<tr>
<td><code>max_it_zero</code> </td><td>maximum number of iterations in <a class="el" href="interfacenum__ops_1_1calc__zero__hh.html" title="Finds the zero of a function using Householder iteration.">num_ops.calc_zero_hh()</a> and <a class="el" href="namespacenum__ops.html#adcc4eacf15c931744316a004f4448b90" title="Finds the zero of a function using Zhang&#39;s method, which is simpler than Brent&#39;s method.">calc_zero_zhang()</a> </td><td>\(100\) </td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni9">9</a>)  </td></tr>
<tr>
<td><code>tol_zero</code> </td><td>tolerance for zero finding </td><td>\(1^{-10}\) </td><td><code>real</code> </td><td>(<a class="el" href="page_inputs.html#fni9">9</a>)  </td></tr>
<tr>
<td><code>max_nr_backtracks_HH</code> </td><td>maximum number of times the correction can be relaxed by half in a backtrack for the Householder methods </td><td>\(20\) </td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni9">9</a>)  </td></tr>
<tr>
<td colspan="5" bgcolor="LightGray" align="center"><b>concerning runtime</b>   </td></tr>
<tr>
<td><code>use_normalization</code> </td><td>use normalization for the internal calculations </td><td><code>.true.</code> </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni6">6</a>)  </td></tr>
<tr>
<td><code>max_tot_mem</code> </td><td>maximum total memory available to the simulation \(\left[kB\right]\) </td><td><code>6000</code> </td><td><code>real</code> </td><td></td></tr>
<tr>
<td><code>sol_n_procs</code> </td><td>Number of processes available for SLEPC solution \((1\ldots N)\) where \(N\) is the number of MPI processes </td><td><code>N</code> </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>norm_disc_prec_eq</code> </td><td>normal discretization precision for equilibrium quantities </td><td>\(3\) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>norm_disc_prec_X</code> </td><td>normal discretization precision for perturbation quantities </td><td>\(3\) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>norm_disc_prec_sol</code> </td><td>normal discretization precision for solution quantities </td><td>\(3\) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>norm_disc_style_sol</code> </td><td>style how solution quantities are discretized <table class="doxtable">
<tr>
<td>\(1\) </td><td>central finite differences  </td></tr>
<tr>
<td>\(2\) </td><td>left finite differences  </td></tr>
</table>
<br  />
 </td><td>\(2\) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>magn_int_style</code> </td><td>style how magnetic integrals are calculated <table class="doxtable">
<tr>
<td>\(1\) </td><td>trapezoidal rule  </td></tr>
<tr>
<td>\(2\) </td><td>Simpson 3/8 rule  </td></tr>
</table>
<br  />
 </td><td>\(1\) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>X_grid_style</code> </td><td>style how perturbation grid is set up <table class="doxtable">
<tr>
<td>\(1\) </td><td>identical to equilibrium grid  </td></tr>
<tr>
<td>\(2\) </td><td>identical to solution grid  </td></tr>
<tr>
<td>\(3\) </td><td>enriched version of equilibrium grid (see <code>max_njq_change</code>)  </td></tr>
</table>
<br  />
 </td><td>\(1\) (<code>X_style</code> 1), \(2\) (<code>X_style</code> 2) </td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni5">5</a>, <a class="el" href="page_inputs.html#fni36">36</a>)   </td></tr>
<tr>
<td><code>max_njq_change</code> </td><td>maximum change of resonant mode numbers for <code>X_grid_style</code> \(3\) </td><td>\(0.49\) </td><td><code>real</code> </td><td>(<a class="el" href="page_inputs.html#fni36">36</a>)  </td></tr>
<tr>
<td><code>max_it_SLEPC</code> </td><td>maximum number of iterations in SLEPC calculation to find eigenvalue </td><td>\(1000\) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>EV_BC</code> </td><td>eigenvalue used in boundary condition of style <code>BC_style</code> = 1 </td><td>\(1\) </td><td><code>real</code> </td><td>(<a class="el" href="page_inputs.html#fni10">10</a>)  </td></tr>
<tr>
<td><code>EV_guess</code> </td><td>target guess for eigenvalue </td><td>\(-0.3\) </td><td><code>real</code> </td><td></td></tr>
<tr>
<td><code>tol_SLEPC</code> </td><td>tolerance used in SLEPC for different Richardson levels </td><td>\([1^{-5},\ldots]\) </td><td><code>real(max_it_rich)</code> </td><td></td></tr>
<tr>
<td><code>rho_style</code> </td><td>style how the density \(\rho\) is calculated <table class="doxtable">
<tr>
<td>\(1\) </td><td>constant <code>rho_0</code>  </td></tr>
</table>
<br  />
 </td><td>\(1\) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>U_style</code> </td><td>style how to calculate geodesical perturbation \(U = \vec{\xi} \cdot \frac{\nabla \psi \times \vec{B}}{\left|\nabla \psi\right|^2}\) is calculated <table class="doxtable">
<tr>
<td>\(1\) </td><td>up to order \( \sim \frac{1}{n} \)  </td></tr>
<tr>
<td>\(2\) </td><td>up to order \( \sim \left(\frac{1}{n}\right)^2 \)  </td></tr>
<tr>
<td>\(3\) </td><td>up to order \( \sim \left(\frac{1}{n}\right)^3 \)  </td></tr>
</table>
<br  />
 </td><td>\(3\) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>K_style</code> </td><td>style how to calculate kinetic energy \(K = \int \left|\vec{\xi}\right|^2 d \text{V}\) <table class="doxtable">
<tr>
<td>\(1\) </td><td>normalization of full perpendicular component  </td></tr>
<tr>
<td>\(2\) </td><td>normalization of only normal component  </td></tr>
</table>
<br  />
 </td><td>\(1\) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>BC_style</code> </td><td>style how boundary conditions are applied for left and right boundary <table class="doxtable">
<tr>
<td>\(1\) </td><td>set to zero  </td></tr>
<tr>
<td>\(2\) </td><td>minimization of surface energy through asymmetric finite differences  </td></tr>
<tr>
<td>\(3\) </td><td>minization through extension of grid  </td></tr>
<tr>
<td>\(4\) </td><td>explicit introduction of the surface energy minimization  </td></tr>
</table>
<br  />
 </td><td>\([1,2]\) </td><td><code>int(2)</code> </td><td>(<a class="el" href="page_inputs.html#fni10">10</a>)  </td></tr>
<tr>
<td><code>norm_style</code> </td><td>style how to calculate normalization <table class="doxtable">
<tr>
<td>\(1\) </td><td>MISHKA normalization with magnetic field on axis  </td></tr>
<tr>
<td>\(2\) </td><td>COBRA normalization with pressure on axis  </td></tr>
</table>
<br  />
 </td><td>\(1\) </td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni11">11</a>)  </td></tr>
<tr>
<td><code>solver_SLEPC_style</code> </td><td>style used in SLEPC to solve the eigenvalue equation <table class="doxtable">
<tr>
<td>\(1\) </td><td>Krylov-Schur with shift-invert  </td></tr>
<tr>
<td>\(2\) </td><td>generalized Davidson with preconditioner  </td></tr>
</table>
<br  />
 </td><td>\(1\) </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>matrix_SLEPC_style</code> </td><td>style used for SLEPC matrices <table class="doxtable">
<tr>
<td>\(1\) </td><td>sparse matrices  </td></tr>
<tr>
<td>\(2\) </td><td>shell matrices  </td></tr>
</table>
<br  />
 </td><td>\(1\) </td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni12">12</a>)  </td></tr>
</table>
<h2><a class="anchor" id="inputs_PB3D_cmd"></a>
Command-line inputs</h2>
<a class="anchor" id="inputs_PB3D_cmd_tab"></a>
<table class="doxtable">
<caption>Table 2. PB3D command-line options</caption>
<tr>
<th>input parameter </th><th>explanation </th><th>argument </th><th>note  </th></tr>
<tr>
<td><code>test</code> </td><td>test mode <dl class="section note"><dt>Note</dt><dd>Debug version only </dd></dl>
</td><td></td><td>(<a class="el" href="page_inputs.html#fni28">28</a>)   </td></tr>
<tr>
<td><code>no_plots</code> </td><td>do not produce any output plots </td><td></td><td></td></tr>
<tr>
<td><code>no_outputs</code> </td><td>do not produce text output </td><td></td><td>(<a class="el" href="page_inputs.html#fni29">29</a>)   </td></tr>
<tr>
<td><code>do_execute_command_line</code> </td><td>run the external command line shell commands during execution </td><td></td><td>(<a class="el" href="page_inputs.html#fni30">30</a>)   </td></tr>
<tr>
<td><code>mem_info</code> </td><td>produce memory profiles for each process <dl class="section note"><dt>Note</dt><dd>Debug version only </dd></dl>
</td><td></td><td>(<a class="el" href="page_inputs.html#fni31">31</a>)   </td></tr>
<tr>
<td><code>no_guess</code> </td><td>do not use a guess</td><td></td><td></td></tr>
<tr>
<td><code>jump_to_sol</code> </td><td>jump straight to the solution for the Richardson level at which the simulationes are (re)started, possibly for different solution grid parameters such as <code>n_r_sol</code> </td><td></td><td>(<a class="el" href="page_inputs.html#fni33">33</a>)   </td></tr>
<tr>
<td><code>export_HEL</code> </td><td>create a VMEC input file from HELENA variables, possibly adding a toroidal ripple </td><td></td><td>(<a class="el" href="page_inputs.html#fni34">34</a>)   </td></tr>
<tr>
<td><code>plot_VMEC_modes</code> </td><td>plot decay of VMEC modes </td><td></td><td></td></tr>
<tr>
<td><code>invert_top_bottom_H</code> </td><td>invert top and bottom of HELENA equilibrium <dl class="section note"><dt>Note</dt><dd>Debug version only </dd></dl>
</td><td></td><td></td></tr>
</table>
<h1><a class="anchor" id="inputs_POST"></a>
POST Inputs</h1>
<h2><a class="anchor" id="inputs_POST_file"></a>
Input file</h2>
<a class="anchor" id="inputs_POST_file_tab"></a>
<table class="doxtable">
<caption>Table 3. POST input file</caption>
<tr>
<th>input parameter </th><th>explanation </th><th>default value </th><th>data type </th><th>note  </th></tr>
<tr>
<td colspan="5" bgcolor="LightGray" align="center"><b>concerning solution</b>   </td></tr>
<tr>
<td><code>min_r_plot</code> </td><td>minimum normalized flux of output domain \(\left(0\ldots 1\right)\) </td><td></td><td><code>real</code> </td><td>(<a class="el" href="page_inputs.html#fni24">24</a>)   </td></tr>
<tr>
<td><code>max_r_plot</code> </td><td>maximum normalized flux of output domain \(\left(0\ldots 1\right)\) </td><td></td><td><code>real</code> </td><td><p class="starttd">(<a class="el" href="page_inputs.html#fni24">24</a>)  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td colspan="5" bgcolor="LightGray" align="center"><b>concerning input and output</b>   </td></tr>
<tr>
<td><code>n_sol_plotted</code> </td><td>number of solutions plotted </td><td><code>n_sol_requested</code> </td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>pert_mult_factor_POST</code> </td><td>factor by which the grid can be perturbed, with respect to the maximum perturbation of each solution independently </td><td>\(0\) </td><td><code>real</code> </td><td>(<a class="el" href="page_inputs.html#fni25">25</a>)  </td></tr>
<tr>
<td><code>plot_resonance</code> </td><td>plot the safety factor (poloidal flux) or rotational transform (toroidal flux) and the resonant values </td><td><code>.false.</code> </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni13">13</a>)  </td></tr>
<tr>
<td><code>plot_magn_grid</code> </td><td>plot magnetic field lines in the flux surfaces in 3-D geometry as an animation </td><td><code>.false.</code> </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni14">14</a>)  </td></tr>
<tr>
<td><code>plot_B</code> </td><td>plot magnetic field \(\vec{B} = \nabla \alpha \times \nabla \psi \) \(\left[T\right]\) </td><td><code>.false.</code> </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni15">15</a>)  </td></tr>
<tr>
<td><code>plot_J</code> </td><td>plot current \(\vec{J} = \mu_0^{-1} \nabla \times \left(\nabla \alpha \times \nabla \psi\right) \) \(\left[\frac{A}{m^2}\right]\) </td><td><code>.false.</code> </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni16">16</a>)  </td></tr>
<tr>
<td><code>plot_kappa</code> </td><td>plot curvature \(\vec{\kappa} = \frac{\vec{B}}{B} \cdot \nabla \frac{\vec{B}}{B}\) \(\left[\frac{1}{m}\right]\) and its components \( \kappa_n = \frac{\nabla \psi}{\left|\nabla \psi\right|^2} \cdot \vec{\kappa} \) \(\left[\frac{1}{T m^2}\right]\) and \( \kappa_g = \frac{\nabla \psi \times \vec{B}}{B^2} \cdot \vec{\kappa} \) \(\left[\phantom{\cdot}\right]\) </td><td><code>.false.</code> </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni17">17</a>)  </td></tr>
<tr>
<td><code>plot_flux_q</code> </td><td>plot flux quantities \(q\), \(\iota\), \(p\) \(\left[Pa\right]\), \(\Psi_\text{pol}\) \(\left[T m^2\right]\) and \(\Psi_\text{tor}\) \(\left[T m^2\right]\) </td><td><code>.false.</code> </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni18">18</a>)  </td></tr>
<tr>
<td><code>plot_sol_xi</code> </td><td>plot normal mode \(\vec{\xi}\) \(\left[m\right]\) and its components \( X = \frac{\nabla \psi}{B^2} \cdot \vec{\xi} \) \(\left[\frac{m^2}{T}\right]\) and \( U = \frac{\nabla \psi \times \vec{B}}{\left|\nabla \psi\right|^2} \cdot \vec{\xi} \) \(\left[\phantom{\cdot}\right]\) </td><td><code>.false.</code> </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni26">26</a>)  </td></tr>
<tr>
<td><code>plot_sol_Q</code> </td><td>plot magnetic field perturbation due to the normal mode \(\vec{Q} = \nabla \times \left(\vec{\xi} \times \vec{B}\right) \) \(\left[T\right]\) and its components \( Q_n = \frac{\nabla \psi}{B^2} \cdot \vec{Q} \) \(\left[m\right]\) and \( Q_g = \frac{\nabla \psi \times \vec{B}}{\left|\nabla \psi\right|^2} \cdot \vec{Q} \) \(\left[\frac{T}{m}\right]\) </td><td><code>.false.</code> </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni26">26</a>)  </td></tr>
<tr>
<td><code>plot_E_rec</code> </td><td>plot energy reconstruction </td><td><code>.false.</code> </td><td><code>log</code> </td><td>(<a class="el" href="page_inputs.html#fni27">27</a>)  </td></tr>
<tr>
<td><code>n_theta_plot</code> </td><td>number of points in plots in \(\theta\) direction </td><td></td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni19">19</a>)  </td></tr>
<tr>
<td><code>n_zeta_plot</code> </td><td>number of points in plots in \(\zeta\) direction </td><td></td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni19">19</a>)  </td></tr>
<tr>
<td><code>min_theta_plot</code> </td><td>minimum of \(\theta\) range for plots </td><td>\(1\)</td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>max_theta_plot</code> </td><td>minimum of \(\theta\) range for plots </td><td>\(3\)</td><td><code>int</code> </td><td></td></tr>
<tr>
<td><code>min_zeta_plot</code> </td><td>minimum of \(\zeta\) range for plots </td><td></td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni20">20</a>)  </td></tr>
<tr>
<td><code>max_zeta_plot</code> </td><td>minimum of \(\zeta\) range for plots </td><td></td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni20">20</a>)  </td></tr>
<tr>
<td><code>plot_size</code> </td><td>size of 2-D plots in inch by inch </td><td>\(\left[10,5\right]\) </td><td><code>int(2)</code>  </td><td></td></tr>
<tr>
<td><code>ex_plot_style</code> </td><td>style how external plots are made <table class="doxtable">
<tr>
<td>\(1\) </td><td>GnuPlot  </td></tr>
<tr>
<td>\(2\) </td><td>Bokeh for 2-D and Mayavi for 3-D  </td></tr>
</table>
<br  />
 </td><td>\(1\) </td><td><code>int</code>  </td><td><p class="starttd">(<a class="el" href="page_inputs.html#fni21">21</a>) </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td colspan="5" bgcolor="LightGray" align="center"><b>concerning Richardson extrapolation</b>   </td></tr>
<tr>
<td><code>PB3D_rich_lvl</code> </td><td>Richardson level at which to perform post-processing </td><td><code>int</code> </td><td><p class="starttd">(<a class="el" href="page_inputs.html#fni22">22</a>) </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td colspan="5" bgcolor="LightGray" align="center"><b>concerning finding zeros</b>   </td></tr>
<tr>
<td><code>max_it_zero</code> </td><td>maximum number of iterations in <a class="el" href="interfacenum__ops_1_1calc__zero__hh.html" title="Finds the zero of a function using Householder iteration.">num_ops.calc_zero_hh()</a> and <a class="el" href="namespacenum__ops.html#adcc4eacf15c931744316a004f4448b90" title="Finds the zero of a function using Zhang&#39;s method, which is simpler than Brent&#39;s method.">calc_zero_zhang()</a> </td><td>\(100\) </td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni9">9</a>)  </td></tr>
<tr>
<td><code>tol_zero</code> </td><td>tolerance for zero finding </td><td>\(1^{-10}\) </td><td><code>real</code> </td><td>(<a class="el" href="page_inputs.html#fni9">9</a>)  </td></tr>
<tr>
<td><code>max_nr_backtracks_HH</code> </td><td>maximum number of times the correction can be relaxed by half in a backtrack for the Householder methods </td><td>\(20\) </td><td><code>int</code> </td><td><p class="starttd">(<a class="el" href="page_inputs.html#fni9">9</a>) </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td colspan="5" bgcolor="LightGray" align="center"><b>concerning runtime</b>   </td></tr>
<tr>
<td><code>max_tot_mem</code> </td><td>maximum total memory available to the simulation \(\left[kB\right]\) </td><td><code>6000</code> </td><td><code>real</code> </td><td></td></tr>
<tr>
<td><code>POST_style</code> </td><td>style how post-processing is done <table class="doxtable">
<tr>
<td>\(1\) </td><td>extended rectangular grid in \(\theta\) and \(\zeta\)  </td></tr>
<tr>
<td>\(2\) </td><td>field-aligned grid used internally by PB3D  </td></tr>
</table>
<br  />
 </td><td>\(1\) </td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni23">23</a>)  </td></tr>
<tr>
<td><code>plot_grid_style</code> </td><td>style used for output plotting <table class="doxtable">
<tr>
<td>\(0\) </td><td>3-D plots  </td></tr>
<tr>
<td>\(1\) </td><td>slab plots: \(\theta\) and \(\zeta\) are sides of a slab  </td></tr>
<tr>
<td>\(2\) </td><td>slab plots with folding of fundamental interval \(0\ldots 2 \pi\)  </td></tr>
<tr>
<td>\(3\) </td><td>straight cylinder geometry: \(\zeta\) is straightened  </td></tr>
</table>
<br  />
 </td><td>\(0\) </td><td><code>int</code> </td><td>(<a class="el" href="page_inputs.html#fni23">23</a>)  </td></tr>
</table>
<h2><a class="anchor" id="inputs_POST_cmd"></a>
Command-line inputs</h2>
<a class="anchor" id="inputs_POST_cmd_tab"></a>
<table class="doxtable">
<caption>Table 4. POST command-line options</caption>
<tr>
<th>input parameter </th><th>explanation </th><th>argument </th><th>note  </th></tr>
<tr>
<td><code>test</code> </td><td>test mode <dl class="section note"><dt>Note</dt><dd>Debug version only </dd></dl>
</td><td></td><td>(<a class="el" href="page_inputs.html#fni28">28</a>)   </td></tr>
<tr>
<td><code>no_plots</code> </td><td>do not produce any output plots </td><td></td><td></td></tr>
<tr>
<td><code>no_outputs</code> </td><td>do not produce text output </td><td></td><td>(<a class="el" href="page_inputs.html#fni29">29</a>)   </td></tr>
<tr>
<td><code>do_execute_command_line</code> </td><td>run the external command line shell commands during execution </td><td></td><td>(<a class="el" href="page_inputs.html#fni30">30</a>)   </td></tr>
<tr>
<td><code>mem_info</code> </td><td>produce memory profiles for each process <dl class="section note"><dt>Note</dt><dd>Debug version only </dd></dl>
</td><td></td><td>(<a class="el" href="page_inputs.html#fni31">31</a>)   </td></tr>
<tr>
<td><code>swap_angles</code> </td><td>swap \(\theta\) and \(\zeta\) of output grid in <code>POST_style = 2</code> </td><td></td><td></td></tr>
<tr>
<td><code>compare_tor_pos</code> </td><td>compare \(\vec{B}\), \(\vec{J}\) and \(\vec{\kappa}\) from <code>plot_B</code>, <code>plot_J</code> and <code>plot_kappa</code> at different toroidal positions, as well as the difference in position </td><td><code>RZ_0(2)</code> </td><td>(<a class="el" href="page_inputs.html#fni32">32</a>)   </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd><ol type="1">
<li><a class="anchor" id="fni1"></a>The normalized flux is either the poloidal (<code>use_pol_flux_F = .true.</code>) or toroidal (<code>use_pol_flux_F = .false.</code>), divided by its value at the boundary.</li>
<li><a class="anchor" id="fni2"></a>Is used in <a class="el" href="namespacex__ops.html#a7d9275e2d927d92548416f21b983b604" title="Checks whether the high-n approximation is valid:">check_x_modes()</a> whether there exists a range in which each of the modes resonates.</li>
<li><a class="anchor" id="fni3"></a>This is the number for the first Richardson level. It is doubled for every next level.</li>
<li><a class="anchor" id="fni4"></a>Should satisfy the high- \(n\) approximation, currently set to &gt; 5 .</li>
<li><a class="anchor" id="fni5"></a>If <code>min_sec_X</code> and <code>max_sec_X</code> is set, the user prescribes the secondary mode number range (<code>X_style</code> = 1). If <code>n_mod_X</code> is set, on the other hand, the user prescribes the size of the range, which is automatically chosen (<code>X_style</code> = 2). They cannot be both chosen.</li>
<li><a class="anchor" id="fni6"></a>Normalization constants, with exception of <code>rho_0</code> are set in the routine <a class="el" href="namespaceeq__ops.html#a7cd38586e386e1bc684a327ebcc4c1de" title="Sets up normalization constants.">calc_normalization_const()</a>.</li>
<li><a class="anchor" id="fni7"></a>In <a class="el" href="namespaceslepc__ops.html#a24d97496000ed55f1d11e4d436e084a6" title="Stores the results.">store_results()</a>, it is decided whether the eigenvalue is physical or not, by considering the ratio between real and imaginary part.</li>
<li><a class="anchor" id="fni8"></a>This needs to be between 1 and the maximum level that was obtained in a previous solution, plus 1. For technical HDF5 reasons, if Richardson restart is used, the same input fil parameters should be used for <code>max_tot_mem</code> and the same number of processes should be used. Furthermore, it should not exceed <code>max_it_rich</code>.</li>
<li><a class="anchor" id="fni9"></a>For the case of <a class="el" href="interfacenum__ops_1_1calc__zero__hh.html" title="Finds the zero of a function using Householder iteration.">num_ops.calc_zero_hh()</a>, at every iteration it is checked whether the correction approximation is better than the original one. If it is not, the correction is relaxed by a factor half. This is done <code>max_nr_backtracks_HH</code> times.</li>
<li><a class="anchor" id="fni10"></a>See <a class="el" href="namespaceslepc__ops.html#a05f8a23335ed47ad1996cddf3bcfdc2e" title="Sets the boundary conditions deep in the plasma (1) and at the edge (2).">set_bc()</a>.</li>
<li><a class="anchor" id="fni11"></a>See <a class="el" href="namespaceeq__ops.html#a7cd38586e386e1bc684a327ebcc4c1de" title="Sets up normalization constants.">calc_normalization_const()</a>.</li>
<li><a class="anchor" id="fni12"></a>See <a class="el" href="namespaceslepc__ops.html#a79c420987056c225931b51c8d30ece1f" title="Solve the eigenvalue system using SLEPC.">solve_ev_system_slepc()</a></li>
<li><a class="anchor" id="fni13"></a>See <a class="el" href="namespacex__ops.html#abdaf1308e13cede3a153e8c6cf35a637" title="plot -profile or -profile in flux coordinates with  or  indicated if requested.">resonance_plot()</a>.</li>
<li><a class="anchor" id="fni14"></a>See <a class="el" href="namespacegrid__ops.html#addd76b7b3be0b51e0863ae0cdfef41e6" title="Plots the grid in real 3-D space.">magn_grid_plot()</a>.</li>
<li><a class="anchor" id="fni15"></a>See <a class="el" href="namespaceeq__ops.html#a73a8c3cea1e8a636b4978bc626e0fab0" title="Plots the magnetic fields.">b_plot()</a>. The output is done in various coordinate system, as explained in <a class="el" href="namespacegrid__utilities.html#ad3d9386b9abcb1a7e17369a1b3a3750d" title="Calculates contra- and covariant components of a vector in multiple coordinate systems.">calc_vec_comp()</a>.</li>
<li><a class="anchor" id="fni16"></a>See <a class="el" href="namespaceeq__ops.html#afabdf28e5c26ceb87e6eb8cf3809919d" title="Plots the current.">j_plot()</a>. The output is done in various coordinate system, as explained in <a class="el" href="namespacegrid__utilities.html#ad3d9386b9abcb1a7e17369a1b3a3750d" title="Calculates contra- and covariant components of a vector in multiple coordinate systems.">calc_vec_comp()</a>.</li>
<li><a class="anchor" id="fni17"></a>See <a class="el" href="namespaceeq__ops.html#ad173efd111cb85c11bc2bc78a7555096" title="Plots the curvature.">kappa_plot()</a>. The output is done in various coordinate system, as explained in <a class="el" href="namespacegrid__utilities.html#ad3d9386b9abcb1a7e17369a1b3a3750d" title="Calculates contra- and covariant components of a vector in multiple coordinate systems.">calc_vec_comp()</a>.</li>
<li><a class="anchor" id="fni18"></a>See <a class="el" href="namespaceeq__ops.html#af0effe20188d46a44680c2648e4572e9" title="Plots the flux quantities in the solution grid.">flux_q_plot()</a>.</li>
<li><a class="anchor" id="fni19"></a>For <code>eq_style = 1</code>, the equilibrium is axisymmetric, so by default <code>n_theta_plot = 501</code> and <code>n_zeta_plot = 1</code>; for <code>eq_style = 2</code>, the equilibrium can be 3-D, so <code>n_theta_plot = 201</code> and <code>n_zeta_plot = 51</code></li>
<li><a class="anchor" id="fni20"></a>For <code>eq_style = 1</code>, the equilibrium is axisymmetric, so by default <code>min_zeta_plot = max_zeta_plot 0</code>; for <code>eq_style = 2</code>, the equilibrium can be 3-D, so <code>min_zeta_plot = 0</code> and <code>max_zeta_plot = 2</code>.</li>
<li><a class="anchor" id="fni21"></a>This refers to the external plots, which are complimentary to the HDF5 plots. See <a class="el" href="namespaceoutput__ops.html#a50bfbb88cc91805469353c3ff47b3e2e" title="Use external program to draw a plot.">draw_ex()</a>.</li>
<li><a class="anchor" id="fni22"></a>If output is done that requires a solution, this needs to be between 1 and the maximum level that was obtained in PB3D. See <a class="el" href="namespacerich__ops.html#a58e1bed1bed5c2d0b91cc7dc5e3099d9" title="Probe to find out which Richardson levels are available.">find_max_rich_lvl()</a>. If no solution is found, some of the outputs that do not depend on this still work.Optionally, this can be forced by choosing <code>PB3D_rich_lvl</code> not positive.</li>
<li><a class="anchor" id="fni23"></a>The <code>POST_style</code> determines whether the post-processing is done on an extended, new grid, or on the PB3D internal grid. On top of this, through <code>plot_grid_style</code> the user can set the output grid for the post-processing. Note that some combinations of styles do not make sense.</li>
<li><a class="anchor" id="fni24"></a>By default, the plot normal range is chosen equal to the solution normal range from <code>min_r_sol</code> and <code>max_r_sol</code>, but it can be restricted. This is useful, for example, to reduce computation time.</li>
<li><a class="anchor" id="fni25"></a>The Cartesian components of the result of the division of <code>pert_mult_factor_POST</code> by the maximum value of the solution normal mode amplitude is added to the equilibrium Cartesian grid components to illustrate the perturbation in 3-D. This is done for each solution independently and sequentially. If it is not positive, it is ignored. Note that <code>plot_sol_xi = .true.</code> is necessary for this to be used.</li>
<li><a class="anchor" id="fni26"></a>These quantities are calculated in <a class="el" href="interfacesol__utilities_1_1calc__xuq.html" title="Calculates the normal ( ) or geodesic ( ) components of the plasma perturbation  or the magnetic pert...">sol_utilities.calc_xuq()</a>. This is done for a time sequene, currently hard-coded in <a class="el" href="namespacesol__ops.html#a13b3cf2fb6437a3c93256368fa91c267" title="Plots Eigenvectors.">plot_sol_vec()</a>, depending on whether the solution is stable or unstable.</li>
<li><a class="anchor" id="fni27"></a>The energy reconstruction is performed in <a class="el" href="namespacesol__ops.html#ae094c2a5235324b4aadb53623978d191" title="Calculate the energy terms in the energy decomposition.">calc_e()</a> if either one of <code>plot_sol_xi</code>, <code>plot_sol_Q</code> or <code>plot_E_rec</code> is true.</li>
<li><a class="anchor" id="fni28"></a>Equivalent use is through <code>-t</code>. If this is used, <code>do_execute_command_line</code> should be set to true as well. See <a class="el" href="namespacetest.html#aca21ee464c0b1f4b617177afdde110ec" title="Performs generic tests.">generic_tests()</a>.</li>
<li><a class="anchor" id="fni29"></a>This is used internally as well, to suppress certain output. See <a class="el" href="namespacedriver__x.html#ada3d72a0929daaa5e3da585246d62281" title="Main driver of PB3D perturbation part.">run_driver_x()</a> and <a class="el" href="namespacedriver__post.html#a33b3c6f9018a0ddc92dce77394b8ab37" title="The main driver routine for postprocessing.">run_driver_post()</a>.</li>
<li><a class="anchor" id="fni30"></a>This can fail on local systems, and generally works badly on computational clusters, where the computational nodes often don't have the external tools (see <code>ex_plot_style</code>) installed. By default, an output file is created for the shell commands, which can be executed afterwards. See <a class="el" href="page_outputs.html#output_file_shell">Shell commands file</a>.</li>
<li><a class="anchor" id="fni31"></a>This is done by calling <a class="el" href="namespacemessages.html#a82dddaab795b78b3d39e1ff1aab2f665" title="Returns the memory usage in kilobytes.">get_mem_usage()</a> and storing the result at every allocation and deallocation of an <code>eq_1_type</code>, <code>eq_2_type</code>, <code>X_1_type</code>, <code>X_2_type</code>, <code>vac_type</code> or <code>sol_type</code>, as well as for input quantities. Furthermore at every user output with <a class="el" href="namespacemessages.html#aa4a8d01563e92558e8a0875b075ec54c" title="Write output to file identified by output_i.">writo()</a>, this is also done, and the output is prepended to the output string. Also, the output is written to a file. See <a class="el" href="page_outputs.html#output_file_mem">Memory usage file</a>.</li>
<li><a class="anchor" id="fni32"></a>This is useful to calculate the ripple in these quantities. To use this, it is necessary to have an output grid of only 3 points, where the poloidal projection of the middle point should be the in the middle between the poloidal projections of the two others. Also, you have to provide through <code>RZ_0</code> the \(R\) and \(Z\) value of the origin of the geometrical poloidal angle that is used to calculate distances. See <a class="el" href="interfacegrid__utilities_1_1calc__tor__diff.html" title="Calculates the toroidal difference for a magnitude calculated on three toroidal points: two extremiti...">grid_utilities.calc_tor_diff()</a>.</li>
<li><a class="anchor" id="fni33"></a>Jumping straight to the solution is useful if a simulation already calculated all the necessary quantities to set up the solution matrices \(\overline{\text{A}}\) and \(\overline{\text{B}}\) in \(\overline{\text{A}} \vec{X} = \lambda \overline{\text{B}} \vec{X}\) and the solution needs to be redone, for example because a calculation was attempted with a method that did not converge.</li>
<li><a class="anchor" id="fni34"></a>This is a rather complicated procedure with many possibilities that is intended for expert use. See <a class="el" href="namespaceeq__ops.html#a9addef683b3d4a8c587510e4c994ec61" title="Creates a VMEC input file.">create_vmec_input()</a>.</li>
<li><a class="anchor" id="fni35"></a>Using the toroidal flux is <b>experimental</b> and <b>untested</b>.</li>
<li><a class="anchor" id="fni36"></a>Have a look in <a class="el" href="namespacegrid__ops.html#a1c18f90f93f5fce7ebb4dba60b70e0f8" title="Calculates normal range for the input grid, the equilibrium grid and/or the solution grid.">calc_norm_range()</a>. <code>X_grid_style</code> \(1\) is generally too coarse while <code>X_grid_style</code> \(2\) is too fine. <code>X_grid_style</code> \(3\) was designed to have the both of best world. It only makes sense for <code>X_style</code> 2 (fast), though, as in the enrichment process the fast secondary mode range is used to limit the maximum amount the quantity \(n q\) (when using poloidal flux) or \(m \iota\) (when using toroidal flux) to <code>max_njq_change</code> between two normal grid points. </li>
</ol>
</dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<address class="footer"><small>
<center>this documentation was created with <a href="http://www.doxygen.org/index.html">Doxygen 1.8.17</a> by <a href="mailto:weyenst@gmail.com">Toon Weyens</a></center>
</small></address>
</body>
</html>
